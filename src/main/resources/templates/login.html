<!DOCTYPE html>

<!--汉江师范学院 数计学院 吴乐创建于2022/12/21 22:24:50-->

<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>登录</title>
</head>

<body>
<div id="login">
    <label>
        账号:
        <input type="text" v-model="user.userId">
    </label>
    <br>
    <label>密码:
        <input type="password" v-model="user.password">
    </label>
    <br>
    <p style="color: red" v-if="err == 1">登录失败</p>
    <p style="color: red" v-if="isNull == 1">请输入账号和密码</p>
    <button @click="submit">登录</button>
    <button @click="reset">重置</button>
</div>

<script src="/static/js/vue.js"></script>
<script src="/static/js/axios.js"></script>

<script>
    var login = new Vue({
        el:"#login",
        methods:{
            submit(){
                if(this.userId === '' || this.password === '')
                {
                    this.isNull = 1;
                }else
                {
                    const url = "http://localhost/login";
                    const user = this.user;
                    axios.post(url,user).then(req=>{
                        if(req.data.flag === true)
                        {
                            location.href = "main.html";
                        }else
                        {
                            alert(req.data.message);
                        }
                })
                }

            },
            reset(){
                this.userId = '';
                this.password = ''
            }
        },
        data:{
            user:{
                userId:'',
                password:''
            },
            err:"0",
            isNull:"0"
        }
    })
</script>
</body>
</html>